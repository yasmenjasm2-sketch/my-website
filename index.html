<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Senpa.io Clone</title>
<style>
html,body{margin:0;overflow:hidden;background:#111}
#ui{
position:absolute;top:20px;left:20px;color:#fff;font-family:tahoma
}
#start{
padding:10px 20px;font-size:18px
}
</style>
</head>
<body>

<div id="ui">
<input id="name" placeholder="اسم اللاعب">
<button id="start">Play</button>
</div>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

let mouse={x:0,y:0};
addEventListener("mousemove",e=>{
 mouse.x=e.clientX;
 mouse.y=e.clientY;
});

class Cell{
 constructor(x,y,r,name,color){
  this.x=x;this.y=y;this.r=r;
  this.name=name;this.color=color;
 }
 draw(){
  ctx.beginPath();
  ctx.arc(this.x,this.y,this.r,0,Math.PI*2);
  ctx.fillStyle=this.color;
  ctx.fill();
  ctx.fillStyle="#fff";
  ctx.font=this.r/2+"px Arial";
  ctx.textAlign="center";
  ctx.fillText(this.name,this.x,this.y+5);
 }
 move(){
  let dx=mouse.x-this.x;
  let dy=mouse.y-this.y;
  let d=Math.hypot(dx,dy);
  this.x+=dx/d*2;
  this.y+=dy/d*2;
 }
}

class Food{
 constructor(){
  this.x=Math.random()*5000;
  this.y=Math.random()*5000;
  this.r=5;
 }
 draw(){
  ctx.beginPath();
  ctx.arc(this.x,this.y,this.r,0,Math.PI*2);
  ctx.fillStyle="lime";
  ctx.fill();
 }
}

let player;
let foods=[];
for(let i=0;i<400;i++)foods.push(new Food());

function start(){
 let n=document.getElementById("name").value||"Player";
 player=new Cell(0,0,30,n,"cyan");
 document.getElementById("ui").style.display="none";
 requestAnimationFrame(loop);
}

document.getElementById("start").onclick=start;

function loop(){
 ctx.setTransform(1,0,0,1,0,0);
 ctx.clearRect(0,0,canvas.width,canvas.height);

 ctx.translate(canvas.width/2-player.x,canvas.height/2-player.y);

 foods.forEach((f,i)=>{
  f.draw();
  let d=Math.hypot(player.x-f.x,player.y-f.y);
  if(d<player.r){
   player.r+=0.3;
   foods[i]=new Food();
  }
 });

 player.move();
 player.draw();

 requestAnimationFrame(loop);
}
</script>

</body>
</html>
